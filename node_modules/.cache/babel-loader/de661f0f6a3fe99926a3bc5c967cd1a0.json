{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { useState } from 'react';\nexport var DEFAULT_PAGE_SIZE = 10;\nexport function getPaginationParam(pagination, mergedPagination) {\n  var param = {\n    current: mergedPagination.current,\n    pageSize: mergedPagination.pageSize\n  };\n  var paginationObj = pagination && _typeof(pagination) === 'object' ? pagination : {};\n  Object.keys(paginationObj).forEach(function (pageProp) {\n    var value = mergedPagination[pageProp];\n\n    if (typeof value !== 'function') {\n      param[pageProp] = value;\n    }\n  });\n  return param;\n}\nexport default function usePagination(total, pagination, onChange) {\n  var _a = pagination && _typeof(pagination) === 'object' ? pagination : {},\n      _a$total = _a.total,\n      paginationTotal = _a$total === void 0 ? 0 : _a$total,\n      paginationObj = __rest(_a, [\"total\"]);\n\n  var _useState = useState(function () {\n    return {\n      current: 'defaultCurrent' in paginationObj ? paginationObj.defaultCurrent : 1,\n      pageSize: 'defaultPageSize' in paginationObj ? paginationObj.defaultPageSize : DEFAULT_PAGE_SIZE\n    };\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      innerPagination = _useState2[0],\n      setInnerPagination = _useState2[1]; // ============ Basic Pagination Config ============\n\n\n  var mergedPagination = _extends(_extends(_extends({}, innerPagination), paginationObj), {\n    total: paginationTotal > 0 ? paginationTotal : total\n  });\n\n  if (!paginationTotal) {\n    // Reset `current` if data length changed. Only reset when paginationObj do not have total\n    var maxPage = Math.ceil(total / mergedPagination.pageSize);\n\n    if (maxPage < mergedPagination.current) {\n      mergedPagination.current = 1;\n    }\n  }\n\n  var refreshPagination = function refreshPagination() {\n    var current = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    setInnerPagination(_extends(_extends({}, mergedPagination), {\n      current: current\n    }));\n  };\n\n  var onInternalChange = function onInternalChange() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var current = args[0];\n    refreshPagination(current);\n    onChange(current, args[1] || mergedPagination.pageSize);\n\n    if (pagination && pagination.onChange) {\n      pagination.onChange.apply(pagination, args);\n    }\n  };\n\n  var onInternalShowSizeChange = function onInternalShowSizeChange() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var pageSize = args[1];\n    setInnerPagination(_extends(_extends({}, mergedPagination), {\n      current: 1,\n      pageSize: pageSize\n    }));\n    onChange(1, pageSize);\n\n    if (pagination && pagination.onShowSizeChange) {\n      pagination.onShowSizeChange.apply(pagination, args);\n    }\n  };\n\n  if (pagination === false) {\n    return [{}, function () {}];\n  }\n\n  return [_extends(_extends({}, mergedPagination), {\n    onChange: onInternalChange,\n    onShowSizeChange: onInternalShowSizeChange\n  }), refreshPagination];\n}","map":{"version":3,"sources":["table/hooks/usePagination.js"],"names":["__rest","t","Object","e","s","i","p","DEFAULT_PAGE_SIZE","param","current","mergedPagination","pageSize","paginationObj","pagination","value","paginationTotal","_a","innerPagination","setInnerPagination","useState","total","maxPage","Math","refreshPagination","onInternalChange","args","onChange","onInternalShowSizeChange","onShowSizeChange"],"mappings":"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","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useState } from 'react';\nexport const DEFAULT_PAGE_SIZE = 10;\nexport function getPaginationParam(pagination, mergedPagination) {\n    const param = {\n        current: mergedPagination.current,\n        pageSize: mergedPagination.pageSize,\n    };\n    const paginationObj = pagination && typeof pagination === 'object' ? pagination : {};\n    Object.keys(paginationObj).forEach(pageProp => {\n        const value = mergedPagination[pageProp];\n        if (typeof value !== 'function') {\n            param[pageProp] = value;\n        }\n    });\n    return param;\n}\nexport default function usePagination(total, pagination, onChange) {\n    const _a = pagination && typeof pagination === 'object' ? pagination : {}, { total: paginationTotal = 0 } = _a, paginationObj = __rest(_a, [\"total\"]);\n    const [innerPagination, setInnerPagination] = useState(() => {\n        return {\n            current: 'defaultCurrent' in paginationObj ? paginationObj.defaultCurrent : 1,\n            pageSize: 'defaultPageSize' in paginationObj ? paginationObj.defaultPageSize : DEFAULT_PAGE_SIZE,\n        };\n    });\n    // ============ Basic Pagination Config ============\n    const mergedPagination = Object.assign(Object.assign(Object.assign({}, innerPagination), paginationObj), { total: paginationTotal > 0 ? paginationTotal : total });\n    if (!paginationTotal) {\n        // Reset `current` if data length changed. Only reset when paginationObj do not have total\n        const maxPage = Math.ceil(total / mergedPagination.pageSize);\n        if (maxPage < mergedPagination.current) {\n            mergedPagination.current = 1;\n        }\n    }\n    const refreshPagination = (current = 1) => {\n        setInnerPagination(Object.assign(Object.assign({}, mergedPagination), { current }));\n    };\n    const onInternalChange = (...args) => {\n        const [current] = args;\n        refreshPagination(current);\n        onChange(current, args[1] || mergedPagination.pageSize);\n        if (pagination && pagination.onChange) {\n            pagination.onChange(...args);\n        }\n    };\n    const onInternalShowSizeChange = (...args) => {\n        const [, pageSize] = args;\n        setInnerPagination(Object.assign(Object.assign({}, mergedPagination), { current: 1, pageSize }));\n        onChange(1, pageSize);\n        if (pagination && pagination.onShowSizeChange) {\n            pagination.onShowSizeChange(...args);\n        }\n    };\n    if (pagination === false) {\n        return [{}, () => { }];\n    }\n    return [\n        Object.assign(Object.assign({}, mergedPagination), { onChange: onInternalChange, onShowSizeChange: onInternalShowSizeChange }),\n        refreshPagination,\n    ];\n}\n"]},"metadata":{},"sourceType":"module"}