{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nimport * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport useMemo from \"rc-util/es/hooks/useMemo\";\nimport classNames from 'classnames';\nimport List from 'rc-virtual-list';\nimport TransBtn from './TransBtn';\n/**\n * Using virtual list of option display.\n * Will fallback to dom if use customize render.\n */\n\nvar OptionList = function OptionList(_ref, ref) {\n  var prefixCls = _ref.prefixCls,\n      id = _ref.id,\n      flattenOptions = _ref.flattenOptions,\n      childrenAsData = _ref.childrenAsData,\n      values = _ref.values,\n      searchValue = _ref.searchValue,\n      multiple = _ref.multiple,\n      defaultActiveFirstOption = _ref.defaultActiveFirstOption,\n      height = _ref.height,\n      itemHeight = _ref.itemHeight,\n      notFoundContent = _ref.notFoundContent,\n      open = _ref.open,\n      menuItemSelectedIcon = _ref.menuItemSelectedIcon,\n      onSelect = _ref.onSelect,\n      onToggleOpen = _ref.onToggleOpen,\n      onActiveValue = _ref.onActiveValue,\n      onScroll = _ref.onScroll;\n  var itemPrefixCls = \"\".concat(prefixCls, \"-item\");\n  var memoFlattenOptions = useMemo(function () {\n    return flattenOptions;\n  }, [open, flattenOptions], function (prev, next) {\n    return next[0] && prev[1] !== next[1];\n  }); // =========================== List ===========================\n\n  var listRef = React.useRef(null);\n\n  var onListMouseDown = function onListMouseDown(event) {\n    event.preventDefault();\n  };\n\n  var scrollIntoView = function scrollIntoView(index) {\n    if (listRef.current) {\n      listRef.current.scrollTo({\n        index: index\n      });\n    }\n  }; // ========================== Active ==========================\n\n\n  var getEnabledActiveIndex = function getEnabledActiveIndex(index) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var len = memoFlattenOptions.length;\n\n    for (var i = 0; i < len; i += 1) {\n      var current = (index + i * offset + len) % len;\n      var _memoFlattenOptions$c = memoFlattenOptions[current],\n          group = _memoFlattenOptions$c.group,\n          data = _memoFlattenOptions$c.data;\n\n      if (!group && !data.disabled) {\n        return current;\n      }\n    }\n\n    return -1;\n  };\n\n  var _React$useState = React.useState(function () {\n    return getEnabledActiveIndex(0);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeIndex = _React$useState2[0],\n      setActiveIndex = _React$useState2[1];\n\n  var setActive = function setActive(index) {\n    setActiveIndex(index); // Trigger active event\n\n    var flattenItem = memoFlattenOptions[index];\n\n    if (!flattenItem) {\n      onActiveValue(null, -1);\n      return;\n    }\n\n    onActiveValue(flattenItem.data.value, index);\n  }; // Auto active first item when list length or searchValue changed\n\n\n  React.useEffect(function () {\n    setActive(defaultActiveFirstOption !== false ? getEnabledActiveIndex(0) : -1);\n  }, [memoFlattenOptions.length, searchValue]); // Auto scroll to item position in single mode\n\n  React.useEffect(function () {\n    if (!multiple && open && values.size === 1) {\n      var value = Array.from(values)[0];\n      var index = memoFlattenOptions.findIndex(function (_ref2) {\n        var data = _ref2.data;\n        return data.value === value;\n      });\n      setActive(index);\n      scrollIntoView(index);\n    }\n  }, [open]); // ========================== Values ==========================\n\n  var onSelectValue = function onSelectValue(value) {\n    if (value !== undefined) {\n      onSelect(value, {\n        selected: !values.has(value)\n      });\n    } // Single mode should always close by select\n\n\n    if (!multiple) {\n      onToggleOpen(false);\n    }\n  }; // ========================= Keyboard =========================\n\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      onKeyDown: function onKeyDown(event) {\n        var which = event.which;\n\n        switch (which) {\n          // >>> Arrow keys\n          case KeyCode.UP:\n          case KeyCode.DOWN:\n            {\n              var offset = 0;\n\n              if (which === KeyCode.UP) {\n                offset = -1;\n              } else if (which === KeyCode.DOWN) {\n                offset = 1;\n              }\n\n              if (offset !== 0) {\n                var nextActiveIndex = getEnabledActiveIndex(activeIndex + offset, offset);\n                scrollIntoView(nextActiveIndex);\n                setActive(nextActiveIndex);\n              }\n\n              break;\n            }\n          // >>> Select\n\n          case KeyCode.ENTER:\n            {\n              // value\n              var item = memoFlattenOptions[activeIndex];\n\n              if (item && !item.data.disabled) {\n                onSelectValue(item.data.value);\n              } else {\n                onSelectValue(undefined);\n              }\n\n              if (open) {\n                event.preventDefault();\n              }\n\n              break;\n            }\n          // >>> Close\n\n          case KeyCode.ESC:\n            {\n              onToggleOpen(false);\n            }\n        }\n      },\n      onKeyUp: function onKeyUp() {}\n    };\n  }); // ========================== Render ==========================\n\n  if (memoFlattenOptions.length === 0) {\n    return React.createElement(\"div\", {\n      role: \"listbox\",\n      id: \"\".concat(id, \"_list\"),\n      className: \"\".concat(itemPrefixCls, \"-empty\"),\n      onMouseDown: onListMouseDown\n    }, notFoundContent);\n  }\n\n  function renderItem(index) {\n    var item = memoFlattenOptions[index];\n    var value = item && item.data.value;\n    return item ? React.createElement(\"div\", {\n      key: index,\n      role: \"option\",\n      id: \"\".concat(id, \"_list_\").concat(index),\n      \"aria-selected\": values.has(value)\n    }, value) : null;\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    role: \"listbox\",\n    id: \"\".concat(id, \"_list\"),\n    style: {\n      height: 0,\n      overflow: 'hidden'\n    }\n  }, renderItem(activeIndex - 1), renderItem(activeIndex), renderItem(activeIndex + 1)), React.createElement(List, {\n    itemKey: \"key\",\n    ref: listRef,\n    data: memoFlattenOptions,\n    height: height,\n    itemHeight: itemHeight,\n    fullHeight: false,\n    onMouseDown: onListMouseDown,\n    onScroll: onScroll\n  }, function (_ref3, itemIndex) {\n    var _classNames;\n\n    var group = _ref3.group,\n        groupOption = _ref3.groupOption,\n        data = _ref3.data;\n    var label = data.label,\n        key = data.key; // Group\n\n    if (group) {\n      return React.createElement(\"div\", {\n        className: classNames(itemPrefixCls, \"\".concat(itemPrefixCls, \"-group\"))\n      }, label !== undefined ? label : key);\n    }\n\n    var disabled = data.disabled,\n        value = data.value,\n        title = data.title,\n        children = data.children,\n        style = data.style,\n        className = data.className; // Option\n\n    var selected = values.has(value);\n    var optionPrefixCls = \"\".concat(itemPrefixCls, \"-option\");\n    var optionClassName = classNames(itemPrefixCls, optionPrefixCls, className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-grouped\"), groupOption), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-active\"), activeIndex === itemIndex && !disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-selected\"), selected), _classNames));\n    var mergedLabel = childrenAsData ? children : label;\n    var iconVisible = !menuItemSelectedIcon || typeof menuItemSelectedIcon === 'function' || selected;\n    return React.createElement(\"div\", {\n      \"aria-selected\": selected,\n      className: optionClassName,\n      title: title,\n      onMouseMove: function onMouseMove() {\n        if (activeIndex === itemIndex || disabled) {\n          return;\n        }\n\n        setActive(itemIndex);\n      },\n      onClick: function onClick() {\n        if (!disabled) {\n          onSelectValue(value);\n        }\n      },\n      style: style\n    }, React.createElement(\"div\", {\n      className: \"\".concat(optionPrefixCls, \"-content\")\n    }, mergedLabel || value), React.isValidElement(menuItemSelectedIcon) || selected, iconVisible && React.createElement(TransBtn, {\n      className: \"\".concat(itemPrefixCls, \"-option-state\"),\n      customizeIcon: menuItemSelectedIcon,\n      customizeIconProps: {\n        isSelected: selected\n      }\n    }, selected ? '✓' : null));\n  }));\n};\n\nvar RefOptionList = React.forwardRef(OptionList);\nRefOptionList.displayName = 'OptionList';\nexport default RefOptionList;","map":{"version":3,"sources":["/Users/nancyou/Desktop/nasa/node_modules/rc-select/es/OptionList.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","Symbol","iterator","prototype","toString","call","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","length","err","Array","isArray","React","KeyCode","useMemo","classNames","List","TransBtn","OptionList","_ref","ref","prefixCls","id","flattenOptions","childrenAsData","values","searchValue","multiple","defaultActiveFirstOption","height","itemHeight","notFoundContent","open","menuItemSelectedIcon","onSelect","onToggleOpen","onActiveValue","onScroll","itemPrefixCls","concat","memoFlattenOptions","prev","listRef","useRef","onListMouseDown","event","preventDefault","scrollIntoView","index","current","scrollTo","getEnabledActiveIndex","offset","arguments","len","_memoFlattenOptions$c","group","data","disabled","_React$useState","useState","_React$useState2","activeIndex","setActiveIndex","setActive","flattenItem","useEffect","size","from","findIndex","_ref2","onSelectValue","selected","has","useImperativeHandle","onKeyDown","which","UP","DOWN","nextActiveIndex","ENTER","item","ESC","onKeyUp","createElement","role","className","onMouseDown","renderItem","Fragment","style","overflow","itemKey","fullHeight","_ref3","itemIndex","_classNames","groupOption","label","title","children","optionPrefixCls","optionClassName","mergedLabel","iconVisible","onMouseMove","onClick","isValidElement","customizeIcon","customizeIconProps","isSelected","RefOptionList","forwardRef","displayName"],"mappings":"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","sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport * as React from 'react';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport useMemo from \"rc-util/es/hooks/useMemo\";\nimport classNames from 'classnames';\nimport List from 'rc-virtual-list';\nimport TransBtn from './TransBtn';\n/**\n * Using virtual list of option display.\n * Will fallback to dom if use customize render.\n */\n\nvar OptionList = function OptionList(_ref, ref) {\n  var prefixCls = _ref.prefixCls,\n      id = _ref.id,\n      flattenOptions = _ref.flattenOptions,\n      childrenAsData = _ref.childrenAsData,\n      values = _ref.values,\n      searchValue = _ref.searchValue,\n      multiple = _ref.multiple,\n      defaultActiveFirstOption = _ref.defaultActiveFirstOption,\n      height = _ref.height,\n      itemHeight = _ref.itemHeight,\n      notFoundContent = _ref.notFoundContent,\n      open = _ref.open,\n      menuItemSelectedIcon = _ref.menuItemSelectedIcon,\n      onSelect = _ref.onSelect,\n      onToggleOpen = _ref.onToggleOpen,\n      onActiveValue = _ref.onActiveValue,\n      onScroll = _ref.onScroll;\n  var itemPrefixCls = \"\".concat(prefixCls, \"-item\");\n  var memoFlattenOptions = useMemo(function () {\n    return flattenOptions;\n  }, [open, flattenOptions], function (prev, next) {\n    return next[0] && prev[1] !== next[1];\n  }); // =========================== List ===========================\n\n  var listRef = React.useRef(null);\n\n  var onListMouseDown = function onListMouseDown(event) {\n    event.preventDefault();\n  };\n\n  var scrollIntoView = function scrollIntoView(index) {\n    if (listRef.current) {\n      listRef.current.scrollTo({\n        index: index\n      });\n    }\n  }; // ========================== Active ==========================\n\n\n  var getEnabledActiveIndex = function getEnabledActiveIndex(index) {\n    var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var len = memoFlattenOptions.length;\n\n    for (var i = 0; i < len; i += 1) {\n      var current = (index + i * offset + len) % len;\n      var _memoFlattenOptions$c = memoFlattenOptions[current],\n          group = _memoFlattenOptions$c.group,\n          data = _memoFlattenOptions$c.data;\n\n      if (!group && !data.disabled) {\n        return current;\n      }\n    }\n\n    return -1;\n  };\n\n  var _React$useState = React.useState(function () {\n    return getEnabledActiveIndex(0);\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      activeIndex = _React$useState2[0],\n      setActiveIndex = _React$useState2[1];\n\n  var setActive = function setActive(index) {\n    setActiveIndex(index); // Trigger active event\n\n    var flattenItem = memoFlattenOptions[index];\n\n    if (!flattenItem) {\n      onActiveValue(null, -1);\n      return;\n    }\n\n    onActiveValue(flattenItem.data.value, index);\n  }; // Auto active first item when list length or searchValue changed\n\n\n  React.useEffect(function () {\n    setActive(defaultActiveFirstOption !== false ? getEnabledActiveIndex(0) : -1);\n  }, [memoFlattenOptions.length, searchValue]); // Auto scroll to item position in single mode\n\n  React.useEffect(function () {\n    if (!multiple && open && values.size === 1) {\n      var value = Array.from(values)[0];\n      var index = memoFlattenOptions.findIndex(function (_ref2) {\n        var data = _ref2.data;\n        return data.value === value;\n      });\n      setActive(index);\n      scrollIntoView(index);\n    }\n  }, [open]); // ========================== Values ==========================\n\n  var onSelectValue = function onSelectValue(value) {\n    if (value !== undefined) {\n      onSelect(value, {\n        selected: !values.has(value)\n      });\n    } // Single mode should always close by select\n\n\n    if (!multiple) {\n      onToggleOpen(false);\n    }\n  }; // ========================= Keyboard =========================\n\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      onKeyDown: function onKeyDown(event) {\n        var which = event.which;\n\n        switch (which) {\n          // >>> Arrow keys\n          case KeyCode.UP:\n          case KeyCode.DOWN:\n            {\n              var offset = 0;\n\n              if (which === KeyCode.UP) {\n                offset = -1;\n              } else if (which === KeyCode.DOWN) {\n                offset = 1;\n              }\n\n              if (offset !== 0) {\n                var nextActiveIndex = getEnabledActiveIndex(activeIndex + offset, offset);\n                scrollIntoView(nextActiveIndex);\n                setActive(nextActiveIndex);\n              }\n\n              break;\n            }\n          // >>> Select\n\n          case KeyCode.ENTER:\n            {\n              // value\n              var item = memoFlattenOptions[activeIndex];\n\n              if (item && !item.data.disabled) {\n                onSelectValue(item.data.value);\n              } else {\n                onSelectValue(undefined);\n              }\n\n              if (open) {\n                event.preventDefault();\n              }\n\n              break;\n            }\n          // >>> Close\n\n          case KeyCode.ESC:\n            {\n              onToggleOpen(false);\n            }\n        }\n      },\n      onKeyUp: function onKeyUp() {}\n    };\n  }); // ========================== Render ==========================\n\n  if (memoFlattenOptions.length === 0) {\n    return React.createElement(\"div\", {\n      role: \"listbox\",\n      id: \"\".concat(id, \"_list\"),\n      className: \"\".concat(itemPrefixCls, \"-empty\"),\n      onMouseDown: onListMouseDown\n    }, notFoundContent);\n  }\n\n  function renderItem(index) {\n    var item = memoFlattenOptions[index];\n    var value = item && item.data.value;\n    return item ? React.createElement(\"div\", {\n      key: index,\n      role: \"option\",\n      id: \"\".concat(id, \"_list_\").concat(index),\n      \"aria-selected\": values.has(value)\n    }, value) : null;\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    role: \"listbox\",\n    id: \"\".concat(id, \"_list\"),\n    style: {\n      height: 0,\n      overflow: 'hidden'\n    }\n  }, renderItem(activeIndex - 1), renderItem(activeIndex), renderItem(activeIndex + 1)), React.createElement(List, {\n    itemKey: \"key\",\n    ref: listRef,\n    data: memoFlattenOptions,\n    height: height,\n    itemHeight: itemHeight,\n    fullHeight: false,\n    onMouseDown: onListMouseDown,\n    onScroll: onScroll\n  }, function (_ref3, itemIndex) {\n    var _classNames;\n\n    var group = _ref3.group,\n        groupOption = _ref3.groupOption,\n        data = _ref3.data;\n    var label = data.label,\n        key = data.key; // Group\n\n    if (group) {\n      return React.createElement(\"div\", {\n        className: classNames(itemPrefixCls, \"\".concat(itemPrefixCls, \"-group\"))\n      }, label !== undefined ? label : key);\n    }\n\n    var disabled = data.disabled,\n        value = data.value,\n        title = data.title,\n        children = data.children,\n        style = data.style,\n        className = data.className; // Option\n\n    var selected = values.has(value);\n    var optionPrefixCls = \"\".concat(itemPrefixCls, \"-option\");\n    var optionClassName = classNames(itemPrefixCls, optionPrefixCls, className, (_classNames = {}, _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-grouped\"), groupOption), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-active\"), activeIndex === itemIndex && !disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(optionPrefixCls, \"-selected\"), selected), _classNames));\n    var mergedLabel = childrenAsData ? children : label;\n    var iconVisible = !menuItemSelectedIcon || typeof menuItemSelectedIcon === 'function' || selected;\n    return React.createElement(\"div\", {\n      \"aria-selected\": selected,\n      className: optionClassName,\n      title: title,\n      onMouseMove: function onMouseMove() {\n        if (activeIndex === itemIndex || disabled) {\n          return;\n        }\n\n        setActive(itemIndex);\n      },\n      onClick: function onClick() {\n        if (!disabled) {\n          onSelectValue(value);\n        }\n      },\n      style: style\n    }, React.createElement(\"div\", {\n      className: \"\".concat(optionPrefixCls, \"-content\")\n    }, mergedLabel || value), React.isValidElement(menuItemSelectedIcon) || selected, iconVisible && React.createElement(TransBtn, {\n      className: \"\".concat(itemPrefixCls, \"-option-state\"),\n      customizeIcon: menuItemSelectedIcon,\n      customizeIconProps: {\n        isSelected: selected\n      }\n    }, selected ? '✓' : null));\n  }));\n};\n\nvar RefOptionList = React.forwardRef(OptionList);\nRefOptionList.displayName = 'OptionList';\nexport default RefOptionList;"]},"metadata":{},"sourceType":"module"}