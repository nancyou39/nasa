{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n/**\n * TODO: 4.0\n * - remove `dataSource`\n * - `size` not work with customizeInput\n * - customizeInput not feedback `ENTER` key since accessibility enhancement\n */\n\n\nimport * as React from 'react';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport Select from '../select';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\nvar Option = Select.Option;\nvar InternalSelect = Select;\n\nfunction isSelectOptionOrSelectOptGroup(child) {\n  return child && child.type && (child.type.isSelectOption || child.type.isSelectOptGroup);\n}\n\nvar AutoComplete = function AutoComplete(props, ref) {\n  var customizePrefixCls = props.prefixCls,\n      className = props.className,\n      children = props.children,\n      dataSource = props.dataSource;\n  var childNodes = toArray(children);\n  var selectRef = React.useRef();\n  React.useImperativeHandle(ref, function () {\n    return selectRef.current;\n  }); // ============================= Input =============================\n\n  var customizeInput;\n\n  if (childNodes.length === 1 && React.isValidElement(childNodes[0]) && !isSelectOptionOrSelectOptGroup(childNodes[0])) {\n    customizeInput = childNodes[0];\n  }\n\n  var getInputElement = function getInputElement() {\n    return customizeInput;\n  }; // ============================ Options ============================\n\n\n  var optionChildren; // [Legacy] convert `children` or `dataSource` into option children\n\n  if (childNodes.length && isSelectOptionOrSelectOptGroup(childNodes[0])) {\n    optionChildren = children;\n  } else {\n    optionChildren = dataSource ? dataSource.map(function (item) {\n      if (React.isValidElement(item)) {\n        return item;\n      }\n\n      switch (_typeof(item)) {\n        case 'string':\n          return React.createElement(Option, {\n            key: item,\n            value: item\n          }, item);\n\n        case 'object':\n          {\n            var optionValue = item.value;\n            return React.createElement(Option, {\n              key: optionValue,\n              value: optionValue\n            }, item.text);\n          }\n\n        default:\n          throw new Error('AutoComplete[dataSource] only supports type `string[] | Object[]`.');\n      }\n    }) : [];\n  } // ============================ Warning ============================\n\n\n  React.useEffect(function () {\n    warning(!('dataSource' in props), 'AutoComplete', '`dataSource` is deprecated, please use `options` instead.');\n    warning(!customizeInput || !('size' in props), 'AutoComplete', 'You need to control style self instead of setting `size` when using customize input.');\n  }, []);\n  return React.createElement(ConfigConsumer, null, function (_ref) {\n    var getPrefixCls = _ref.getPrefixCls;\n    var prefixCls = getPrefixCls('select', customizePrefixCls);\n    return React.createElement(InternalSelect, _extends({\n      ref: selectRef\n    }, omit(props, ['dataSource']), {\n      prefixCls: prefixCls,\n      className: classNames(className, \"\".concat(prefixCls, \"-auto-complete\")),\n      mode: Select.SECRET_COMBOBOX_MODE_DO_NOT_USE,\n      getInputElement: getInputElement\n    }), optionChildren);\n  });\n};\n\nvar RefAutoComplete = React.forwardRef(AutoComplete);\nRefAutoComplete.Option = Option;\nexport default RefAutoComplete;","map":{"version":3,"sources":["auto-complete/index.jsx"],"names":["Option","Select","InternalSelect","child","AutoComplete","customizePrefixCls","className","children","dataSource","props","childNodes","toArray","selectRef","React","isSelectOptionOrSelectOptGroup","customizeInput","getInputElement","optionChildren","item","optionValue","warning","getPrefixCls","prefixCls","omit","classNames","RefAutoComplete"],"mappings":"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","sourcesContent":["/**\n * TODO: 4.0\n * - remove `dataSource`\n * - `size` not work with customizeInput\n * - customizeInput not feedback `ENTER` key since accessibility enhancement\n */\nimport * as React from 'react';\nimport toArray from 'rc-util/lib/Children/toArray';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport Select from '../select';\nimport { ConfigConsumer } from '../config-provider';\nimport warning from '../_util/warning';\nconst { Option } = Select;\nconst InternalSelect = Select;\nfunction isSelectOptionOrSelectOptGroup(child) {\n    return child && child.type && (child.type.isSelectOption || child.type.isSelectOptGroup);\n}\nconst AutoComplete = (props, ref) => {\n    const { prefixCls: customizePrefixCls, className, children, dataSource } = props;\n    const childNodes = toArray(children);\n    const selectRef = React.useRef();\n    React.useImperativeHandle(ref, () => selectRef.current);\n    // ============================= Input =============================\n    let customizeInput;\n    if (childNodes.length === 1 &&\n        React.isValidElement(childNodes[0]) &&\n        !isSelectOptionOrSelectOptGroup(childNodes[0])) {\n        customizeInput = childNodes[0];\n    }\n    const getInputElement = () => customizeInput;\n    // ============================ Options ============================\n    let optionChildren;\n    // [Legacy] convert `children` or `dataSource` into option children\n    if (childNodes.length && isSelectOptionOrSelectOptGroup(childNodes[0])) {\n        optionChildren = children;\n    }\n    else {\n        optionChildren = dataSource\n            ? dataSource.map(item => {\n                if (React.isValidElement(item)) {\n                    return item;\n                }\n                switch (typeof item) {\n                    case 'string':\n                        return (<Option key={item} value={item}>\n                  {item}\n                </Option>);\n                    case 'object': {\n                        const { value: optionValue } = item;\n                        return (<Option key={optionValue} value={optionValue}>\n                  {item.text}\n                </Option>);\n                    }\n                    default:\n                        throw new Error('AutoComplete[dataSource] only supports type `string[] | Object[]`.');\n                }\n            })\n            : [];\n    }\n    // ============================ Warning ============================\n    React.useEffect(() => {\n        warning(!('dataSource' in props), 'AutoComplete', '`dataSource` is deprecated, please use `options` instead.');\n        warning(!customizeInput || !('size' in props), 'AutoComplete', 'You need to control style self instead of setting `size` when using customize input.');\n    }, []);\n    return (<ConfigConsumer>\n      {({ getPrefixCls }) => {\n        const prefixCls = getPrefixCls('select', customizePrefixCls);\n        return (<InternalSelect ref={selectRef} {...omit(props, ['dataSource'])} prefixCls={prefixCls} className={classNames(className, `${prefixCls}-auto-complete`)} mode={Select.SECRET_COMBOBOX_MODE_DO_NOT_USE} getInputElement={getInputElement}>\n            {optionChildren}\n          </InternalSelect>);\n    }}\n    </ConfigConsumer>);\n};\nconst RefAutoComplete = React.forwardRef(AutoComplete);\nRefAutoComplete.Option = Option;\nexport default RefAutoComplete;\n"]},"metadata":{},"sourceType":"module"}