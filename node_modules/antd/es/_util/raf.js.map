{"version":3,"sources":["_util/raf.js"],"names":["raf","id","ids","wrapperRaf","callback","delayFrames","myId","restFrames","internalCallback","cancel","pid","undefined"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,IAAIC,EAAE,GAAG,CAAT;AACA,IAAMC,GAAG,GAAG,EAAZ,C,CACA;;AACA,eAAe,SAASC,UAAT,CAAoBC,QAApB,EAA+C;AAAA,MAAjBC,WAAiB,uEAAH,CAAG;AAC1D,MAAMC,IAAI,GAAGL,EAAE,EAAf;AACA,MAAIM,UAAU,GAAGF,WAAjB;;AACA,WAASG,gBAAT,GAA4B;AACxBD,IAAAA,UAAU,IAAI,CAAd;;AACA,QAAIA,UAAU,IAAI,CAAlB,EAAqB;AACjBH,MAAAA,QAAQ;AACR,aAAOF,GAAG,CAACI,IAAD,CAAV;AACH,KAHD,MAIK;AACDJ,MAAAA,GAAG,CAACI,IAAD,CAAH,GAAYN,GAAG,CAACQ,gBAAD,CAAf;AACH;AACJ;;AACDN,EAAAA,GAAG,CAACI,IAAD,CAAH,GAAYN,GAAG,CAACQ,gBAAD,CAAf;AACA,SAAOF,IAAP;AACH;;AACDH,UAAU,CAACM,MAAX,GAAoB,SAASA,MAAT,CAAgBC,GAAhB,EAAqB;AACrC,MAAIA,GAAG,KAAKC,SAAZ,EACI;AACJX,EAAAA,GAAG,CAACS,MAAJ,CAAWP,GAAG,CAACQ,GAAD,CAAd;AACA,SAAOR,GAAG,CAACQ,GAAD,CAAV;AACH,CALD;;AAMAP,UAAU,CAACD,GAAX,GAAiBA,GAAjB,C,CAAsB","sourcesContent":["import raf from 'raf';\nlet id = 0;\nconst ids = {};\n// Support call raf with delay specified frame\nexport default function wrapperRaf(callback, delayFrames = 1) {\n    const myId = id++;\n    let restFrames = delayFrames;\n    function internalCallback() {\n        restFrames -= 1;\n        if (restFrames <= 0) {\n            callback();\n            delete ids[myId];\n        }\n        else {\n            ids[myId] = raf(internalCallback);\n        }\n    }\n    ids[myId] = raf(internalCallback);\n    return myId;\n}\nwrapperRaf.cancel = function cancel(pid) {\n    if (pid === undefined)\n        return;\n    raf.cancel(ids[pid]);\n    delete ids[pid];\n};\nwrapperRaf.ids = ids; // export this for test usage\n"],"file":"raf.js"}