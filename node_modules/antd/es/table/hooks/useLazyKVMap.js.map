{"version":3,"sources":["table/hooks/useLazyKVMap.js"],"names":["React","useLazyKVMap","data","childrenColumnName","getRowKey","mapCacheRef","useRef","getRecordByKey","key","current","dig","records","forEach","record","index","rowKey","kvMap","set","Map","get"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,eAAe,SAASC,YAAT,CAAsBC,IAAtB,EAA4BC,kBAA5B,EAAgDC,SAAhD,EAA2D;AACtE,MAAMC,WAAW,GAAGL,KAAK,CAACM,MAAN,CAAa,EAAb,CAApB;;AACA,WAASC,cAAT,CAAwBC,GAAxB,EAA6B;AACzB,QAAI,CAACH,WAAW,CAACI,OAAb,IACAJ,WAAW,CAACI,OAAZ,CAAoBP,IAApB,KAA6BA,IAD7B,IAEAG,WAAW,CAACI,OAAZ,CAAoBN,kBAApB,KAA2CA,kBAF3C,IAGAE,WAAW,CAACI,OAAZ,CAAoBL,SAApB,KAAkCA,SAHtC,EAGiD;AAE7C;AAF6C,UAGpCM,GAHoC,GAG7C,SAASA,GAAT,CAAaC,OAAb,EAAsB;AAClBA,QAAAA,OAAO,CAACC,OAAR,CAAgB,UAACC,MAAD,EAASC,KAAT,EAAmB;AAC/B,cAAMC,MAAM,GAAGX,SAAS,CAACS,MAAD,EAASC,KAAT,CAAxB;AACAE,UAAAA,KAAK,CAACC,GAAN,CAAUF,MAAV,EAAkBF,MAAlB;;AACA,cAAIV,kBAAkB,IAAIU,MAA1B,EAAkC;AAC9BH,YAAAA,GAAG,CAACG,MAAM,CAACV,kBAAD,CAAN,IAA8B,EAA/B,CAAH;AACH;AACJ,SAND;AAOH,OAX4C;AAY7C;;;AAXA,UAAMa,KAAK,GAAG,IAAIE,GAAJ,EAAd;AAYAR,MAAAA,GAAG,CAACR,IAAD,CAAH;AACAG,MAAAA,WAAW,CAACI,OAAZ,GAAsB;AAClBP,QAAAA,IAAI,EAAJA,IADkB;AAElBC,QAAAA,kBAAkB,EAAlBA,kBAFkB;AAGlBa,QAAAA,KAAK,EAALA,KAHkB;AAIlBZ,QAAAA,SAAS,EAATA;AAJkB,OAAtB;AAMH;;AACD,WAAOC,WAAW,CAACI,OAAZ,CAAoBO,KAApB,CAA0BG,GAA1B,CAA8BX,GAA9B,CAAP;AACH;;AACD,SAAO,CAACD,cAAD,CAAP;AACH","sourcesContent":["import * as React from 'react';\nexport default function useLazyKVMap(data, childrenColumnName, getRowKey) {\n    const mapCacheRef = React.useRef({});\n    function getRecordByKey(key) {\n        if (!mapCacheRef.current ||\n            mapCacheRef.current.data !== data ||\n            mapCacheRef.current.childrenColumnName !== childrenColumnName ||\n            mapCacheRef.current.getRowKey !== getRowKey) {\n            const kvMap = new Map();\n            /* eslint-disable no-inner-declarations */\n            function dig(records) {\n                records.forEach((record, index) => {\n                    const rowKey = getRowKey(record, index);\n                    kvMap.set(rowKey, record);\n                    if (childrenColumnName in record) {\n                        dig(record[childrenColumnName] || []);\n                    }\n                });\n            }\n            /* eslint-enable */\n            dig(data);\n            mapCacheRef.current = {\n                data,\n                childrenColumnName,\n                kvMap,\n                getRowKey,\n            };\n        }\n        return mapCacheRef.current.kvMap.get(key);\n    }\n    return [getRecordByKey];\n}\n"],"file":"useLazyKVMap.js"}