{"version":3,"sources":["modal/useModal/index.jsx"],"names":["React","usePatchElement","HookModal","withConfirm","withInfo","withSuccess","withError","withWarn","uuid","useModal","elements","patchElement","getConfirmFunc","withFunc","hookConfirm","config","modalRef","createRef","closeFunc","modal","destroy","current","update","newConfig","info","success","error","warning","confirm"],"mappings":";;;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,eAAP,MAA4B,6BAA5B;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,WAAT,EAAsBC,QAAtB,EAAgCC,WAAhC,EAA6CC,SAA7C,EAAwDC,QAAxD,QAAyE,YAAzE;AACA,IAAIC,IAAI,GAAG,CAAX;AACA,eAAe,SAASC,QAAT,GAAoB;AAAA,yBACER,eAAe,EADjB;AAAA;AAAA,MACxBS,QADwB;AAAA,MACdC,YADc;;AAE/B,WAASC,cAAT,CAAwBC,QAAxB,EAAkC;AAC9B,WAAO,SAASC,WAAT,CAAqBC,MAArB,EAA6B;AAChCP,MAAAA,IAAI,IAAI,CAAR;AACA,UAAMQ,QAAQ,GAAGhB,KAAK,CAACiB,SAAN,EAAjB;AACA,UAAIC,SAAJ;AACA,UAAMC,KAAK,GAAI,oBAAC,SAAD;AAAW,QAAA,GAAG,kBAAWX,IAAX,CAAd;AAAiC,QAAA,MAAM,EAAEK,QAAQ,CAACE,MAAD,CAAjD;AAA2D,QAAA,GAAG,EAAEC,QAAhE;AAA0E,QAAA,UAAU,EAAE,sBAAM;AACvGE,UAAAA,SAAS;AACZ;AAFc,QAAf;AAGAA,MAAAA,SAAS,GAAGP,YAAY,CAACQ,KAAD,CAAxB;AACA,aAAO;AACHC,QAAAA,OAAO,EAAE,mBAAM;AACX,cAAIJ,QAAQ,CAACK,OAAb,EAAsB;AAClBL,YAAAA,QAAQ,CAACK,OAAT,CAAiBD,OAAjB;AACH;AACJ,SALE;AAMHE,QAAAA,MAAM,EAAE,gBAACC,SAAD,EAAe;AACnB,cAAIP,QAAQ,CAACK,OAAb,EAAsB;AAClBL,YAAAA,QAAQ,CAACK,OAAT,CAAiBC,MAAjB,CAAwBC,SAAxB;AACH;AACJ;AAVE,OAAP;AAYH,KApBD;AAqBH;;AACD,SAAO,CACH;AACIC,IAAAA,IAAI,EAAEZ,cAAc,CAACR,QAAD,CADxB;AAEIqB,IAAAA,OAAO,EAAEb,cAAc,CAACP,WAAD,CAF3B;AAGIqB,IAAAA,KAAK,EAAEd,cAAc,CAACN,SAAD,CAHzB;AAIIqB,IAAAA,OAAO,EAAEf,cAAc,CAACL,QAAD,CAJ3B;AAKIqB,IAAAA,OAAO,EAAEhB,cAAc,CAACT,WAAD;AAL3B,GADG,EAQH,0CAAGO,QAAH,CARG,CAAP;AAUH","sourcesContent":["import * as React from 'react';\nimport usePatchElement from '../../_util/usePatchElement';\nimport HookModal from './HookModal';\nimport { withConfirm, withInfo, withSuccess, withError, withWarn, } from '../confirm';\nlet uuid = 0;\nexport default function useModal() {\n    const [elements, patchElement] = usePatchElement();\n    function getConfirmFunc(withFunc) {\n        return function hookConfirm(config) {\n            uuid += 1;\n            const modalRef = React.createRef();\n            let closeFunc;\n            const modal = (<HookModal key={`modal-${uuid}`} config={withFunc(config)} ref={modalRef} afterClose={() => {\n                closeFunc();\n            }}/>);\n            closeFunc = patchElement(modal);\n            return {\n                destroy: () => {\n                    if (modalRef.current) {\n                        modalRef.current.destroy();\n                    }\n                },\n                update: (newConfig) => {\n                    if (modalRef.current) {\n                        modalRef.current.update(newConfig);\n                    }\n                },\n            };\n        };\n    }\n    return [\n        {\n            info: getConfirmFunc(withInfo),\n            success: getConfirmFunc(withSuccess),\n            error: getConfirmFunc(withError),\n            warning: getConfirmFunc(withWarn),\n            confirm: getConfirmFunc(withConfirm),\n        },\n        <>{elements}</>,\n    ];\n}\n"],"file":"index.js"}