{"version":3,"sources":["input/Input.jsx"],"names":["React","classNames","omit","ClearableLabeledInput","hasPrefixSuffix","ConfigConsumer","SizeContext","warning","fixControlledValue","value","resolveOnChange","target","e","onChange","event","type","Object","create","currentTarget","originalInputValue","getInputClassName","prefixCls","size","disabled","direction","Input","props","focus","input","saveClearableInput","clearableInput","saveInput","onFocus","setState","focused","onBlur","handleReset","setValue","renderInput","className","addonBefore","addonAfter","customizeSize","otherProps","handleChange","handleKeyDown","clearPasswordValueAttribute","removePasswordTimeout","setTimeout","getAttribute","hasAttribute","removeAttribute","onPressEnter","onKeyDown","keyCode","renderComponent","getPrefixCls","state","customizePrefixCls","defaultValue","prevValue","prevProps","document","activeElement","clearTimeout","blur","select","callback","undefined","nextProps","newState","Component","defaultProps"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport ClearableLabeledInput, { hasPrefixSuffix } from './ClearableLabeledInput';\nimport { ConfigConsumer } from '../config-provider';\nimport SizeContext from '../config-provider/SizeContext';\nimport warning from '../_util/warning';\nexport function fixControlledValue(value) {\n    if (typeof value === 'undefined' || value === null) {\n        return '';\n    }\n    return value;\n}\nexport function resolveOnChange(target, e, onChange) {\n    if (onChange) {\n        let event = e;\n        if (e.type === 'click') {\n            // click clear icon\n            event = Object.create(e);\n            event.target = target;\n            event.currentTarget = target;\n            const originalInputValue = target.value;\n            // change target ref value cause e.target.value should be '' when clear input\n            target.value = '';\n            onChange(event);\n            // reset target ref value\n            target.value = originalInputValue;\n            return;\n        }\n        onChange(event);\n    }\n}\nexport function getInputClassName(prefixCls, size, disabled, direction) {\n    return classNames(prefixCls, {\n        [`${prefixCls}-sm`]: size === 'small',\n        [`${prefixCls}-lg`]: size === 'large',\n        [`${prefixCls}-disabled`]: disabled,\n        [`${prefixCls}-rtl`]: direction === 'rtl',\n    });\n}\nclass Input extends React.Component {\n    constructor(props) {\n        super(props);\n        this.direction = 'ltr';\n        this.focus = () => {\n            this.input.focus();\n        };\n        this.saveClearableInput = (input) => {\n            this.clearableInput = input;\n        };\n        this.saveInput = (input) => {\n            this.input = input;\n        };\n        this.onFocus = e => {\n            const { onFocus } = this.props;\n            this.setState({ focused: true });\n            if (onFocus) {\n                onFocus(e);\n            }\n        };\n        this.onBlur = e => {\n            const { onBlur } = this.props;\n            this.setState({ focused: false });\n            if (onBlur) {\n                onBlur(e);\n            }\n        };\n        this.handleReset = (e) => {\n            this.setValue('', () => {\n                this.focus();\n            });\n            resolveOnChange(this.input, e, this.props.onChange);\n        };\n        this.renderInput = (prefixCls, size) => {\n            const { className, addonBefore, addonAfter, size: customizeSize, disabled } = this.props;\n            // Fix https://fb.me/react-unknown-prop\n            const otherProps = omit(this.props, [\n                'prefixCls',\n                'onPressEnter',\n                'addonBefore',\n                'addonAfter',\n                'prefix',\n                'suffix',\n                'allowClear',\n                // Input elements must be either controlled or uncontrolled,\n                // specify either the value prop, or the defaultValue prop, but not both.\n                'defaultValue',\n                'size',\n                'inputType',\n            ]);\n            return (<input {...otherProps} onChange={this.handleChange} onFocus={this.onFocus} onBlur={this.onBlur} onKeyDown={this.handleKeyDown} className={classNames(getInputClassName(prefixCls, customizeSize || size, disabled, this.direction), {\n                [className]: className && !addonBefore && !addonAfter,\n            })} ref={this.saveInput}/>);\n        };\n        this.clearPasswordValueAttribute = () => {\n            // https://github.com/ant-design/ant-design/issues/20541\n            this.removePasswordTimeout = setTimeout(() => {\n                if (this.input &&\n                    this.input.getAttribute('type') === 'password' &&\n                    this.input.hasAttribute('value')) {\n                    this.input.removeAttribute('value');\n                }\n            });\n        };\n        this.handleChange = (e) => {\n            this.setValue(e.target.value, this.clearPasswordValueAttribute);\n            resolveOnChange(this.input, e, this.props.onChange);\n        };\n        this.handleKeyDown = (e) => {\n            const { onPressEnter, onKeyDown } = this.props;\n            if (e.keyCode === 13 && onPressEnter) {\n                onPressEnter(e);\n            }\n            if (onKeyDown) {\n                onKeyDown(e);\n            }\n        };\n        this.renderComponent = ({ getPrefixCls, direction }) => {\n            const { value, focused } = this.state;\n            const { prefixCls: customizePrefixCls } = this.props;\n            const prefixCls = getPrefixCls('input', customizePrefixCls);\n            this.direction = direction;\n            return (<SizeContext.Consumer>\n        {size => (<ClearableLabeledInput size={size} {...this.props} prefixCls={prefixCls} inputType=\"input\" value={fixControlledValue(value)} element={this.renderInput(prefixCls, size)} handleReset={this.handleReset} ref={this.saveClearableInput} direction={direction} focused={focused} triggerFocus={this.focus}/>)}\n      </SizeContext.Consumer>);\n        };\n        const value = typeof props.value === 'undefined' ? props.defaultValue : props.value;\n        this.state = {\n            value,\n            focused: false,\n            // eslint-disable-next-line react/no-unused-state\n            prevValue: props.value,\n        };\n    }\n    static getDerivedStateFromProps(nextProps, { prevValue }) {\n        const newState = { prevValue: nextProps.value };\n        if (nextProps.value !== undefined || prevValue !== nextProps.value) {\n            newState.value = nextProps.value;\n        }\n        return newState;\n    }\n    componentDidMount() {\n        this.clearPasswordValueAttribute();\n    }\n    // Since polyfill `getSnapshotBeforeUpdate` need work with `componentDidUpdate`.\n    // We keep an empty function here.\n    componentDidUpdate() { }\n    getSnapshotBeforeUpdate(prevProps) {\n        if (hasPrefixSuffix(prevProps) !== hasPrefixSuffix(this.props)) {\n            warning(this.input !== document.activeElement, 'Input', `When Input is focused, dynamic add or remove prefix / suffix will make it lose focus caused by dom structure change. Read more: https://ant.design/components/input/#FAQ`);\n        }\n        return null;\n    }\n    componentWillUnmount() {\n        if (this.removePasswordTimeout) {\n            clearTimeout(this.removePasswordTimeout);\n        }\n    }\n    blur() {\n        this.input.blur();\n    }\n    select() {\n        this.input.select();\n    }\n    setValue(value, callback) {\n        if (this.props.value === undefined) {\n            this.setState({ value }, callback);\n        }\n    }\n    render() {\n        return <ConfigConsumer>{this.renderComponent}</ConfigConsumer>;\n    }\n}\nInput.defaultProps = {\n    type: 'text',\n};\nexport default Input;\n"],"file":"Input.js"}