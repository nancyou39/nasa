{"version":3,"sources":["table/hooks/useLazyKVMap.js"],"names":["useLazyKVMap","data","childrenColumnName","getRowKey","mapCacheRef","React","useRef","getRecordByKey","key","current","dig","records","forEach","record","index","rowKey","kvMap","set","Map","get"],"mappings":";;;;;;;;;AAAA;;;;;;AACe,SAASA,YAAT,CAAsBC,IAAtB,EAA4BC,kBAA5B,EAAgDC,SAAhD,EAA2D;AACtE,MAAMC,WAAW,GAAGC,KAAK,CAACC,MAAN,CAAa,EAAb,CAApB;;AACA,WAASC,cAAT,CAAwBC,GAAxB,EAA6B;AACzB,QAAI,CAACJ,WAAW,CAACK,OAAb,IACAL,WAAW,CAACK,OAAZ,CAAoBR,IAApB,KAA6BA,IAD7B,IAEAG,WAAW,CAACK,OAAZ,CAAoBP,kBAApB,KAA2CA,kBAF3C,IAGAE,WAAW,CAACK,OAAZ,CAAoBN,SAApB,KAAkCA,SAHtC,EAGiD;AAE7C;AAF6C,UAGpCO,GAHoC,GAG7C,SAASA,GAAT,CAAaC,OAAb,EAAsB;AAClBA,QAAAA,OAAO,CAACC,OAAR,CAAgB,UAACC,MAAD,EAASC,KAAT,EAAmB;AAC/B,cAAMC,MAAM,GAAGZ,SAAS,CAACU,MAAD,EAASC,KAAT,CAAxB;AACAE,UAAAA,KAAK,CAACC,GAAN,CAAUF,MAAV,EAAkBF,MAAlB;;AACA,cAAIX,kBAAkB,IAAIW,MAA1B,EAAkC;AAC9BH,YAAAA,GAAG,CAACG,MAAM,CAACX,kBAAD,CAAN,IAA8B,EAA/B,CAAH;AACH;AACJ,SAND;AAOH,OAX4C;AAY7C;;;AAXA,UAAMc,KAAK,GAAG,IAAIE,GAAJ,EAAd;AAYAR,MAAAA,GAAG,CAACT,IAAD,CAAH;AACAG,MAAAA,WAAW,CAACK,OAAZ,GAAsB;AAClBR,QAAAA,IAAI,EAAJA,IADkB;AAElBC,QAAAA,kBAAkB,EAAlBA,kBAFkB;AAGlBc,QAAAA,KAAK,EAALA,KAHkB;AAIlBb,QAAAA,SAAS,EAATA;AAJkB,OAAtB;AAMH;;AACD,WAAOC,WAAW,CAACK,OAAZ,CAAoBO,KAApB,CAA0BG,GAA1B,CAA8BX,GAA9B,CAAP;AACH;;AACD,SAAO,CAACD,cAAD,CAAP;AACH","sourcesContent":["import * as React from 'react';\nexport default function useLazyKVMap(data, childrenColumnName, getRowKey) {\n    const mapCacheRef = React.useRef({});\n    function getRecordByKey(key) {\n        if (!mapCacheRef.current ||\n            mapCacheRef.current.data !== data ||\n            mapCacheRef.current.childrenColumnName !== childrenColumnName ||\n            mapCacheRef.current.getRowKey !== getRowKey) {\n            const kvMap = new Map();\n            /* eslint-disable no-inner-declarations */\n            function dig(records) {\n                records.forEach((record, index) => {\n                    const rowKey = getRowKey(record, index);\n                    kvMap.set(rowKey, record);\n                    if (childrenColumnName in record) {\n                        dig(record[childrenColumnName] || []);\n                    }\n                });\n            }\n            /* eslint-enable */\n            dig(data);\n            mapCacheRef.current = {\n                data,\n                childrenColumnName,\n                kvMap,\n                getRowKey,\n            };\n        }\n        return mapCacheRef.current.kvMap.get(key);\n    }\n    return [getRecordByKey];\n}\n"],"file":"useLazyKVMap.js"}