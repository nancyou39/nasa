{"version":3,"sources":["table/hooks/usePagination.js"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","DEFAULT_PAGE_SIZE","getPaginationParam","pagination","mergedPagination","param","current","pageSize","paginationObj","keys","forEach","pageProp","value","usePagination","total","onChange","_a","paginationTotal","defaultCurrent","defaultPageSize","innerPagination","setInnerPagination","maxPage","Math","ceil","refreshPagination","onInternalChange","args","onInternalShowSizeChange","onShowSizeChange"],"mappings":";;;;;;;;;AAWA;;;;;;;;;;;;;;AAXA,IAAIA,MAAM,GAAI,UAAQ,SAAKA,MAAd,IAAyB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAClD,MAAIC,CAAC,GAAG,EAAR;;AACA,OAAK,IAAIC,CAAT,IAAcH,CAAd;AAAiB,QAAII,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCP,CAArC,EAAwCG,CAAxC,KAA8CF,CAAC,CAACO,OAAF,CAAUL,CAAV,IAAe,CAAjE,EACbD,CAAC,CAACC,CAAD,CAAD,GAAOH,CAAC,CAACG,CAAD,CAAR;AADJ;;AAEA,MAAIH,CAAC,IAAI,IAAL,IAAa,OAAOI,MAAM,CAACK,qBAAd,KAAwC,UAAzD,EACI,KAAK,IAAIC,CAAC,GAAG,CAAR,EAAWP,CAAC,GAAGC,MAAM,CAACK,qBAAP,CAA6BT,CAA7B,CAApB,EAAqDU,CAAC,GAAGP,CAAC,CAACQ,MAA3D,EAAmED,CAAC,EAApE,EAAwE;AACpE,QAAIT,CAAC,CAACO,OAAF,CAAUL,CAAC,CAACO,CAAD,CAAX,IAAkB,CAAlB,IAAuBN,MAAM,CAACC,SAAP,CAAiBO,oBAAjB,CAAsCL,IAAtC,CAA2CP,CAA3C,EAA8CG,CAAC,CAACO,CAAD,CAA/C,CAA3B,EACIR,CAAC,CAACC,CAAC,CAACO,CAAD,CAAF,CAAD,GAAUV,CAAC,CAACG,CAAC,CAACO,CAAD,CAAF,CAAX;AACP;AACL,SAAOR,CAAP;AACH,CAVD;;AAYO,IAAMW,iBAAiB,GAAG,EAA1B;;;AACA,SAASC,kBAAT,CAA4BC,UAA5B,EAAwCC,gBAAxC,EAA0D;AAC7D,MAAMC,KAAK,GAAG;AACVC,IAAAA,OAAO,EAAEF,gBAAgB,CAACE,OADhB;AAEVC,IAAAA,QAAQ,EAAEH,gBAAgB,CAACG;AAFjB,GAAd;AAIA,MAAMC,aAAa,GAAGL,UAAU,IAAI,QAAOA,UAAP,MAAsB,QAApC,GAA+CA,UAA/C,GAA4D,EAAlF;AACAX,EAAAA,MAAM,CAACiB,IAAP,CAAYD,aAAZ,EAA2BE,OAA3B,CAAmC,UAAAC,QAAQ,EAAI;AAC3C,QAAMC,KAAK,GAAGR,gBAAgB,CAACO,QAAD,CAA9B;;AACA,QAAI,OAAOC,KAAP,KAAiB,UAArB,EAAiC;AAC7BP,MAAAA,KAAK,CAACM,QAAD,CAAL,GAAkBC,KAAlB;AACH;AACJ,GALD;AAMA,SAAOP,KAAP;AACH;;AACc,SAASQ,aAAT,CAAuBC,KAAvB,EAA8BX,UAA9B,EAA0CY,QAA1C,EAAoD;AACzD,MAAAC,EAAE,GAAGb,UAAU,IAAI,QAAOA,UAAP,MAAsB,QAApC,GAA+CA,UAA/C,GAA4D,EAAjE;AAAA,iBAAsGa,EAAtG,CAAuEF,KAAvE;AAAA,MAA8EG,eAA9E,yBAAgG,CAAhG;AAAA,MAA0GT,aAA1G,GAA0HrB,MAAM,CAAC6B,EAAD,EAAK,CAAC,OAAD,CAAL,CAAhI;;AADyD,kBAEjB,qBAAS,YAAM;AACzD,WAAO;AACHV,MAAAA,OAAO,EAAE,oBAAoBE,aAApB,GAAoCA,aAAa,CAACU,cAAlD,GAAmE,CADzE;AAEHX,MAAAA,QAAQ,EAAE,qBAAqBC,aAArB,GAAqCA,aAAa,CAACW,eAAnD,GAAqElB;AAF5E,KAAP;AAIH,GAL6C,CAFiB;AAAA;AAAA,MAExDmB,eAFwD;AAAA,MAEvCC,kBAFuC,kBAQ/D;;;AACA,MAAMjB,gBAAgB,GAAG,SAAc,SAAc,SAAc,EAAd,EAAkBgB,eAAlB,CAAd,EAAkDZ,aAAlD,CAAd,EAAgF;AAAEM,IAAAA,KAAK,EAAEG,eAAe,GAAG,CAAlB,GAAsBA,eAAtB,GAAwCH;AAAjD,GAAhF,CAAzB;;AACA,MAAI,CAACG,eAAL,EAAsB;AAClB;AACA,QAAMK,OAAO,GAAGC,IAAI,CAACC,IAAL,CAAUV,KAAK,GAAGV,gBAAgB,CAACG,QAAnC,CAAhB;;AACA,QAAIe,OAAO,GAAGlB,gBAAgB,CAACE,OAA/B,EAAwC;AACpCF,MAAAA,gBAAgB,CAACE,OAAjB,GAA2B,CAA3B;AACH;AACJ;;AACD,MAAMmB,iBAAiB,GAAG,SAApBA,iBAAoB,GAAiB;AAAA,QAAhBnB,OAAgB,uEAAN,CAAM;AACvCe,IAAAA,kBAAkB,CAAC,SAAc,SAAc,EAAd,EAAkBjB,gBAAlB,CAAd,EAAmD;AAAEE,MAAAA,OAAO,EAAPA;AAAF,KAAnD,CAAD,CAAlB;AACH,GAFD;;AAGA,MAAMoB,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAa;AAAA,sCAATC,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAAA,QAC3BrB,OAD2B,GAChBqB,IADgB;AAElCF,IAAAA,iBAAiB,CAACnB,OAAD,CAAjB;AACAS,IAAAA,QAAQ,CAACT,OAAD,EAAUqB,IAAI,CAAC,CAAD,CAAJ,IAAWvB,gBAAgB,CAACG,QAAtC,CAAR;;AACA,QAAIJ,UAAU,IAAIA,UAAU,CAACY,QAA7B,EAAuC;AACnCZ,MAAAA,UAAU,CAACY,QAAX,OAAAZ,UAAU,EAAawB,IAAb,CAAV;AACH;AACJ,GAPD;;AAQA,MAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,GAAa;AAAA,uCAATD,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAAA,QACjCpB,QADiC,GACrBoB,IADqB;AAE1CN,IAAAA,kBAAkB,CAAC,SAAc,SAAc,EAAd,EAAkBjB,gBAAlB,CAAd,EAAmD;AAAEE,MAAAA,OAAO,EAAE,CAAX;AAAcC,MAAAA,QAAQ,EAARA;AAAd,KAAnD,CAAD,CAAlB;AACAQ,IAAAA,QAAQ,CAAC,CAAD,EAAIR,QAAJ,CAAR;;AACA,QAAIJ,UAAU,IAAIA,UAAU,CAAC0B,gBAA7B,EAA+C;AAC3C1B,MAAAA,UAAU,CAAC0B,gBAAX,OAAA1B,UAAU,EAAqBwB,IAArB,CAAV;AACH;AACJ,GAPD;;AAQA,MAAIxB,UAAU,KAAK,KAAnB,EAA0B;AACtB,WAAO,CAAC,EAAD,EAAK,YAAM,CAAG,CAAd,CAAP;AACH;;AACD,SAAO,CACH,SAAc,SAAc,EAAd,EAAkBC,gBAAlB,CAAd,EAAmD;AAAEW,IAAAA,QAAQ,EAAEW,gBAAZ;AAA8BG,IAAAA,gBAAgB,EAAED;AAAhD,GAAnD,CADG,EAEHH,iBAFG,CAAP;AAIH","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { useState } from 'react';\nexport const DEFAULT_PAGE_SIZE = 10;\nexport function getPaginationParam(pagination, mergedPagination) {\n    const param = {\n        current: mergedPagination.current,\n        pageSize: mergedPagination.pageSize,\n    };\n    const paginationObj = pagination && typeof pagination === 'object' ? pagination : {};\n    Object.keys(paginationObj).forEach(pageProp => {\n        const value = mergedPagination[pageProp];\n        if (typeof value !== 'function') {\n            param[pageProp] = value;\n        }\n    });\n    return param;\n}\nexport default function usePagination(total, pagination, onChange) {\n    const _a = pagination && typeof pagination === 'object' ? pagination : {}, { total: paginationTotal = 0 } = _a, paginationObj = __rest(_a, [\"total\"]);\n    const [innerPagination, setInnerPagination] = useState(() => {\n        return {\n            current: 'defaultCurrent' in paginationObj ? paginationObj.defaultCurrent : 1,\n            pageSize: 'defaultPageSize' in paginationObj ? paginationObj.defaultPageSize : DEFAULT_PAGE_SIZE,\n        };\n    });\n    // ============ Basic Pagination Config ============\n    const mergedPagination = Object.assign(Object.assign(Object.assign({}, innerPagination), paginationObj), { total: paginationTotal > 0 ? paginationTotal : total });\n    if (!paginationTotal) {\n        // Reset `current` if data length changed. Only reset when paginationObj do not have total\n        const maxPage = Math.ceil(total / mergedPagination.pageSize);\n        if (maxPage < mergedPagination.current) {\n            mergedPagination.current = 1;\n        }\n    }\n    const refreshPagination = (current = 1) => {\n        setInnerPagination(Object.assign(Object.assign({}, mergedPagination), { current }));\n    };\n    const onInternalChange = (...args) => {\n        const [current] = args;\n        refreshPagination(current);\n        onChange(current, args[1] || mergedPagination.pageSize);\n        if (pagination && pagination.onChange) {\n            pagination.onChange(...args);\n        }\n    };\n    const onInternalShowSizeChange = (...args) => {\n        const [, pageSize] = args;\n        setInnerPagination(Object.assign(Object.assign({}, mergedPagination), { current: 1, pageSize }));\n        onChange(1, pageSize);\n        if (pagination && pagination.onShowSizeChange) {\n            pagination.onShowSizeChange(...args);\n        }\n    };\n    if (pagination === false) {\n        return [{}, () => { }];\n    }\n    return [\n        Object.assign(Object.assign({}, mergedPagination), { onChange: onInternalChange, onShowSizeChange: onInternalShowSizeChange }),\n        refreshPagination,\n    ];\n}\n"],"file":"usePagination.js"}