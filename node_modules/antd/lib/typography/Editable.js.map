{"version":3,"sources":["typography/Editable.jsx"],"names":["Editable","arguments","inComposition","state","current","onChange","value","target","setState","replace","onCompositionStart","onCompositionEnd","onKeyDown","keyCode","lastKeyCode","onKeyUp","ctrlKey","altKey","metaKey","shiftKey","onCancel","props","KeyCode","ENTER","confirmChange","ESC","onBlur","onSave","trim","setTextarea","textarea","resizableTextArea","textArea","focus","length","setSelectionRange","prefixCls","ariaLabel","className","style","direction","textAreaClassName","nextProps","prevState","prevValue","newState","React","Component"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport classNames from 'classnames';\nimport KeyCode from 'rc-util/lib/KeyCode';\nimport EnterOutlined from '@ant-design/icons/EnterOutlined';\nimport TextArea from '../input/TextArea';\nclass Editable extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.inComposition = false;\n        this.state = {\n            current: '',\n        };\n        this.onChange = ({ target: { value } }) => {\n            this.setState({ current: value.replace(/[\\r\\n]/g, '') });\n        };\n        this.onCompositionStart = () => {\n            this.inComposition = true;\n        };\n        this.onCompositionEnd = () => {\n            this.inComposition = false;\n        };\n        this.onKeyDown = ({ keyCode }) => {\n            // We don't record keyCode when IME is using\n            if (this.inComposition)\n                return;\n            this.lastKeyCode = keyCode;\n        };\n        this.onKeyUp = ({ keyCode, ctrlKey, altKey, metaKey, shiftKey, }) => {\n            const { onCancel } = this.props;\n            // Check if it's a real key\n            if (this.lastKeyCode === keyCode &&\n                !this.inComposition &&\n                !ctrlKey &&\n                !altKey &&\n                !metaKey &&\n                !shiftKey) {\n                if (keyCode === KeyCode.ENTER) {\n                    this.confirmChange();\n                }\n                else if (keyCode === KeyCode.ESC) {\n                    onCancel();\n                }\n            }\n        };\n        this.onBlur = () => {\n            this.confirmChange();\n        };\n        this.confirmChange = () => {\n            const { current } = this.state;\n            const { onSave } = this.props;\n            onSave(current.trim());\n        };\n        this.setTextarea = (textarea) => {\n            this.textarea = textarea;\n        };\n    }\n    static getDerivedStateFromProps(nextProps, prevState) {\n        const { prevValue } = prevState;\n        const { value } = nextProps;\n        const newState = {\n            prevValue: value,\n        };\n        if (prevValue !== value) {\n            newState.current = value;\n        }\n        return newState;\n    }\n    componentDidMount() {\n        if (this.textarea && this.textarea.resizableTextArea) {\n            const { textArea } = this.textarea.resizableTextArea;\n            textArea.focus();\n            const { length } = textArea.value;\n            textArea.setSelectionRange(length, length);\n        }\n    }\n    render() {\n        const { current } = this.state;\n        const { prefixCls, 'aria-label': ariaLabel, className, style, direction } = this.props;\n        const textAreaClassName = classNames(prefixCls, className, `${prefixCls}-edit-content`, {\n            [`${prefixCls}-rtl`]: direction === 'rtl',\n        });\n        return (<div className={textAreaClassName} style={style}>\n        <TextArea ref={this.setTextarea} value={current} onChange={this.onChange} onKeyDown={this.onKeyDown} onKeyUp={this.onKeyUp} onCompositionStart={this.onCompositionStart} onCompositionEnd={this.onCompositionEnd} onBlur={this.onBlur} aria-label={ariaLabel} autoSize/>\n        <EnterOutlined className={`${prefixCls}-edit-content-confirm`}/>\n      </div>);\n    }\n}\nexport default Editable;\n"],"file":"Editable.js"}